<link rel="import" href="../polymer/polymer.html">

<!-- paper elements -->
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">
<link rel="import" href="../paper-dialog/paper-dialog.html">
<link rel="import" href="../paper-card/paper-card.html">

<!-- icons -->
<link rel="import" href="../iron-icons/iron-icons.html">

<!-- animations -->
<link rel="import" href="../neon-animation/animations/scale-up-animation.html">
<link rel="import" href="../neon-animation/animations/fade-out-animation.html">

<!--
Youtube button element that launches a modal playing the video

Example:

    <featured-articles></featured-articles>

@demo demo/index.html
@hero hero.svg
-->

<dom-module id="featured-articles">
  <template>
    <style>
      paper-card {
        padding: 0 24px 24px;
        width: 33%;
      }
    </style>

    <iron-ajax auto url="http://test-plug-in-blog.pantheonsite.io/plugin-blog/wp-json/wp/v2/posts?per_page=3" handle-as="json" loading="{{loading}}" last-response="{{articlesDataResponse}}"></iron-ajax>

    <template is="dom-if" if="{{loading}}">
      <div class="container flex-horizontal">
        <div class="flexchild"></div>
        <paper-spinner active></paper-spinner>
        <div class="flexchild"></div>
      </div>
    </template>

    <div id="featuredArticlesContainer">
      <template is="dom-if" if="{{!loading}}">
        <div class="featured-articles-items">
          <template is="dom-repeat" items="[[articlesDataResponse]]">
            <paper-card class="featured-article">
              <iron-image id="memeImageCard" style="height: 300px; width: 300px; background-color: lightgray;" sizing="cover" preload fade src="[[item.better_featured_image.media_details.sizes.medium.source_url]]"></iron-image>
              <h3>[[item.title.rendered]]</h3>
              <p>by [[item.post_author.first_name]] [[item.post_author.last_name]]</p>
              <p>on <time>{{getFormattedDate(item.date)}}</time></p>
              <paper-button raised>Learn More</paper-button>
            </paper-card>
          </template>
        </div>
      </template>
    </div>

  </template>

  <script>
    Polymer({
      is: 'featured-articles',

      properties: {
        /**
         * Button Label
         */
        label: {
          type: String,
          value: 'Watch'
        }
      },

      // Element Lifecycle

      ready: function() {
      },

      attached: function() {
        // `attached` fires once the element and its parents have been inserted
        // into a document.
        //
        // This is a good place to perform any work related to your element's
        // visual state or active behavior (measuring sizes, beginning animations,
        // loading resources, etc).
      },

      detached: function() {
        // The analog to `attached`, `detached` fires when the element has been
        // removed from a document.
        //
        // Use this to clean up anything you did in `attached`.
      },

      getFormattedDate: function (timeString) {
        var date = new Date(timeString);
        return date.getMonth()+1 + "-" + date.getDate() + "-" + date.getFullYear();
      }
    });
  </script>
</dom-module>
